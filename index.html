<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IFL Playoff Predictor 2025/26</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rajdhani:wght@500&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Rajdhani', sans-serif;
      margin: 0;
      padding: 0;
      background: #111;
      color: #fff;
      text-align: center;
    }

    h1 img {
      vertical-align: middle;
      height: 40px;
      margin-right: 10px;
    }

    h1, h2 {
      margin: 20px 0;
    }

    .division-title {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      font-size: 1.2rem;
      margin-bottom: 10px;
    }

    .division-title img {
      height: 30px;
    }

    .team-list, #wildcard-list {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
    }

    .team-card {
      position: relative;
      width: 144px;
      height: 40px;
      border-radius: 6px;
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.2s, opacity 0.2s;
      box-shadow: 0 0 6px rgba(0,0,0,0.4);
    }

    .team-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .team-card span {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      transform: translateY(-50%);
      text-shadow: 0 0 4px #000;
      color: #fff;
      font-weight: bold;
      font-size: 0.9rem;
    }

    .team-card.selected {
      outline: 3px solid #00BFFF;
      transform: scale(1.05);
    }

    .team-card.disabled {
      display: none !important;
    }

    .button-row {
      margin: 30px 0;
    }

    button {
      background: #00BFFF;
      color: white;
      border: none;
      padding: 10px 18px;
      margin: 10px;
      font-size: 1rem;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.2s;
    }

    button:hover {
      background: #0099cc;
    }

    button:disabled {
      background: #444;
      cursor: not-allowed;
    }

    #stage2, #stage3 {
      display: none;
      padding: 20px;
    }

    .bracket-container {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      justify-content: center;
      flex-wrap: wrap;
    }

    .brackets {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }

    .round {
      margin: 0 20px;
      display: flex;
      flex-direction: column;
      align-items: center;
      position: relative;
    }

    .matchup {
      margin: 20px 0;
      position: relative;
    }

    .matchup::before, .matchup::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 2px;
      background: #888;
      top: 50%;
      transform: translateY(-50%);
    }

    .matchup::before {
      left: -20px;
    }

    .matchup::after {
      right: -20px;
    }

    .champion-section {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-left: 40px;
    }

    .champion-card {
      width: 144px;
      height: 40px;
      border-radius: 6px;
      overflow: hidden;
      position: relative;
      margin-bottom: 10px;
    }

    .champion-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .champion-card span {
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      transform: translateY(-50%);
      text-shadow: 0 0 4px #000;
      color: black;
      font-weight: bold;
    }

    .bowl-logo {
      width: 100px;
      margin-top: 10px;
    }

    .bracket-header {
      display: flex;
      justify-content: center;
      margin-top: 10px;
    }

    .bracket-header div {
      width: 184px;
      text-align: center;
      font-size: 18px;
    }
  </style>
</head>
<body>
  <h1>
    <img src="https://res.cloudinary.com/de4q4iitx/image/upload/v1752231585/ifl-logo_q9fmai.png" alt="IFL Logo" />
    IFL Playoff Predictor 2025/26
  </h1>

  <div id="stage1"></div>
  <div id="stage2"></div>

  <div id="stage3">
    <h2>Playoff Bracket</h2>
    <div class="bracket-header">
      <div>Divisional</div>
      <div>Conference</div>
      <div>Championship</div>
    </div>
    <div class="bracket-container">
      <div class="brackets">
        <div class="round" id="divisional"></div>
        <div class="round" id="conference"></div>
        <div class="round" id="championship"></div>
      </div>
      <div class="champion-section">
        <h3>üèÜ Champion üèÜ</h3>
        <div id="champion" class="champion-card"><span>?</span></div>
        <img src="https://res.cloudinary.com/de4q4iitx/image/upload/v1752185315/WBIII_id02n2.png" alt="World Bowl Logo" class="bowl-logo" />
      </div>
    </div>
    <div class="button-row">
      <button id="backTo2">Back</button>
    </div>
  </div>

  <script>
    const allTeams = [
      { name: "Australia Whites", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182184/australia-whites_h9o2vz.png", division: "East" },
      { name: "Italia Bulls", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/italia-bulls_aocvis.png", division: "East" },
      { name: "Belarus Barbarians", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/belarus-barbarians_ydx3kz.png", division: "East" },
      { name: "Singapore Smelters", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182186/singapore-smelters_qn3ges.png", division: "East" },
      { name: "South Korea Deers", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182186/southkorea-deers_jbt02f.png", division: "East" },
      { name: "Poland Panthers", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182186/poland-panthers_ppg3zr.png", division: "East" },
      { name: "Germany Cavaliers", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/germany-cavaliers_qrcojc.png", division: "Central" },
      { name: "UK 3 Lions", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182186/uk-tri-lions_kyixfr.png", division: "Central" },
      { name: "Finaland Frigate", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/belgium-bulldogs_hrx8td.png", division: "Central" },
      { name: "Belgium Bulldogs", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/belgium-bulldogs_hrx8td.png", division: "Central" },
      { name: "Holland Hornets", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/holland-hornets_ilzroo.png", division: "Central" },
      { name: "South Africa Silverbacks", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182186/southafrica-silverbaks_x6but2.png", division: "Central" },
      { name: "USA Drones", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182187/usa-drones_doeba8.png", division: "West" },
      { name: "Jamaica Thunder", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/jamaica-thunder_ogo7aj.png", division: "West" },
      { name: "Rwanda Raiders", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182186/rwanda-raiders_aqtgu7.png", division: "West" },
      { name: "Egypt Pharaohs", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/egypt-pharaohs_ycglpl.png", division: "West" },
      { name: "Peru Piranhas", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/peru-piranhas_yueas6.png", division: "West" },
      { name: "Brazil Hummingbirds", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/brazil-hummingbirds_dras9r.png", division: "West" }
    ];

    // Rest of JavaScript coming next message due to length‚Ä¶
  </script>
  let divisionWinners = {};
let wildcards = [];

const stage1 = document.getElementById('stage1');
const stage2 = document.getElementById('stage2');
const stage3 = document.getElementById('stage3');

// --- Stage 1: Division Winners ---
function renderStage1() {
  stage1.innerHTML = '<h2>Select Division Winners</h2>';
  const divisions = ['East', 'Central', 'West'];

  divisions.forEach(division => {
    const divTitle = document.createElement('div');
    divTitle.className = 'division-title';
    divTitle.innerHTML = `<strong>${division} Division</strong>`;
    const teamList = document.createElement('div');
    teamList.className = 'team-list';
    teamList.id = `div-${division}`;

    allTeams.filter(t => t.division === division).forEach(team => {
      const card = createTeamCard(team);
      card.onclick = () => selectDivisionWinner(team, division, card);
      teamList.appendChild(card);
    });

    stage1.appendChild(divTitle);
    stage1.appendChild(teamList);
  });

  const nextBtn = document.createElement('button');
  nextBtn.textContent = 'Next: Select Wildcards';
  nextBtn.disabled = true;
  nextBtn.onclick = () => {
    stage1.style.display = 'none';
    renderStage2();
    stage2.style.display = 'block';
  };
  nextBtn.id = 'toStage2';

  stage1.appendChild(nextBtn);
}

function selectDivisionWinner(team, division, card) {
  divisionWinners[division] = team;

  document.querySelectorAll(`#div-${division} .team-card`).forEach(c => c.classList.remove('selected'));
  card.classList.add('selected');

  if (Object.keys(divisionWinners).length === 3) {
    document.getElementById('toStage2').disabled = false;
  }
}

// --- Stage 2: Wildcard Selection ---
function renderStage2() {
  stage2.innerHTML = '<h2>Select 5 Wildcard Teams</h2><div id="wildcard-list" class="team-list"></div>';

  const excludedNames = Object.values(divisionWinners).map(t => t.name);
  const wcList = document.getElementById('wildcard-list');

  allTeams.filter(t => !excludedNames.includes(t.name)).forEach(team => {
    const card = createTeamCard(team);
    card.onclick = () => toggleWildcard(team, card);
    wcList.appendChild(card);
  });

  const nextBtn = document.createElement('button');
  nextBtn.textContent = 'Next: Bracket';
  nextBtn.disabled = true;
  nextBtn.onclick = () => {
    stage2.style.display = 'none';
    renderStage3();
    stage3.style.display = 'block';
  };
  nextBtn.id = 'toStage3';

  const backBtn = document.createElement('button');
  backBtn.textContent = 'Back';
  backBtn.onclick = () => {
    stage2.style.display = 'none';
    stage1.style.display = 'block';
  };

  stage2.appendChild(document.createElement('br'));
  stage2.appendChild(backBtn);
  stage2.appendChild(nextBtn);
}

function toggleWildcard(team, card) {
  const i = wildcards.findIndex(t => t.name === team.name);
  if (i >= 0) {
    wildcards.splice(i, 1);
    card.classList.remove('selected');
  } else if (wildcards.length < 5) {
    wildcards.push(team);
    card.classList.add('selected');
  }

  document.getElementById('toStage3').disabled = wildcards.length !== 5;
}

// --- Stage 3: Bracket View ---
const bracketData = {
  divisional: [],
  conference: [],
  championship: []
};

function renderStage3() {
  const teams = [...Object.values(divisionWinners), ...wildcards];
  renderRound('divisional', teams);
}

function createTeamCard(team) {
  const card = document.createElement('div');
  card.className = 'team-card';
  card.innerHTML = `<img src="${team.logo}" alt=""><span>${team.name}</span>`;
  return card;
}

function renderRound(roundId, teams) {
  const container = document.getElementById(roundId);
  container.innerHTML = "";
  bracketData[roundId] = new Array(teams.length / 2).fill(null);

  for (let i = 0; i < teams.length; i += 2) {
    const matchup = createMatchup(teams[i], teams[i + 1], i / 2, roundId);
    container.appendChild(matchup);
  }
}

function createMatchup(team1, team2, matchIndex, roundId) {
  const matchup = document.createElement('div');
  matchup.className = 'matchup';
  matchup.dataset.match = matchIndex;

  function createCard(team) {
    const card = document.createElement('div');
    card.className = 'team-card';

    if (team) {
      card.dataset.name = team.name;
      card.innerHTML = `
        <img src="${team.logo}" alt="${team.name} logo">
        <span>${team.name}</span>
      `;
      card.onclick = () => selectBracketTeam(card, matchIndex, roundId);
    } else {
      card.innerHTML = `<span>TBD</span>`;
      card.style.opacity = 0.5;
    }

    return card;
  }

  matchup.appendChild(createCard(team1));
  matchup.appendChild(createCard(team2));
  return matchup;
}

function selectBracketTeam(card, matchIndex, roundId) {
  const container = document.getElementById(roundId);
  const matchup = container.querySelector(`.matchup[data-match="${matchIndex}"]`);
  Array.from(matchup.children).forEach(c => c.classList.remove('selected'));
  card.classList.add('selected');

  bracketData[roundId][matchIndex] = {
    name: card.dataset.name,
    logo: card.querySelector('img')?.src || ""
  };

  const isComplete = bracketData[roundId].every(x => x !== null);

  if (isComplete) {
    if (roundId === 'divisional') {
      createNextRound('conference', bracketData.divisional);
    } else if (roundId === 'conference') {
      createNextRound('championship', bracketData.conference);
    } else if (roundId === 'championship') {
      const champion = bracketData.championship[0];
      if (champion) {
        const champEl = document.getElementById('champion');
        champEl.innerHTML = `
          <img src="${champion.logo}" alt="${champion.name} logo">
          <span>${champion.name}</span>
        `;
      }
    }
  }
}

function createNextRound(nextRoundId, previousWinners) {
  const container = document.getElementById(nextRoundId);
  container.innerHTML = "";
  bracketData[nextRoundId] = [];

  for (let i = 0; i < previousWinners.length; i += 2) {
    const team1 = previousWinners[i];
    const team2 = previousWinners[i + 1] || null;
    const matchup = createMatchup(team1, team2, i / 2, nextRoundId);
    container.appendChild(matchup);
    bracketData[nextRoundId].push(null);
  }
}

document.getElementById('backTo2').onclick = () => {
  stage3.style.display = 'none';
  stage2.style.display = 'block';
};

// Start
renderStage1();

</body>
</html>

