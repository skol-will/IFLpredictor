<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>IFL Playoff Predictor 2025/26</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rajdhani:wght@500&display=swap" rel="stylesheet" />
<style>
  body {
    font-family: 'Rajdhani', sans-serif;
    margin: 0; padding: 0;
    background: #111;
    color: #fff;
    text-align: center;
  }
  h1 img {
    vertical-align: middle;
    height: 40px;
    margin-right: 10px;
  }
  h1, h2, h3 {
    margin: 20px 0 12px;
  }
  #stage1, #stage2, #stage3 {
    padding: 20px;
    max-width: 960px;
    margin: 0 auto 30px;
  }
  #stage2, #stage3 {
    display: none;
  }
  .division-title {
    font-size: 1.3rem;
    margin: 20px 0 8px;
  }
  .team-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 12px;
  }
  .team-card {
    position: relative;
    width: 144px;
    height: 40px;
    border-radius: 6px;
    overflow: hidden;
    cursor: pointer;
    box-shadow: 0 0 6px rgba(0,0,0,0.4);
    background: #222;
    user-select: none;
  }
  .team-card img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  .team-card span {
    position: absolute;
    top: 50%;
    left: 0;
    right: 0;
    transform: translateY(-50%);
    font-weight: bold;
    font-size: 0.9rem;
    color: #fff;
    text-shadow: 0 0 4px #000;
    pointer-events: none;
  }
  .team-card.selected {
    outline: 3px solid #00BFFF;
    transform: scale(1.05);
    z-index: 2;
  }
  .button-row {
    margin: 30px 0;
  }
  button {
    background: #00BFFF;
    color: white;
    border: none;
    padding: 10px 22px;
    margin: 10px 8px;
    font-size: 1rem;
    border-radius: 6px;
    cursor: pointer;
    transition: background 0.2s;
  }
  button:hover:not(:disabled) {
    background: #0099cc;
  }
  button:disabled {
    background: #444;
    cursor: not-allowed;
  }
  .bracket-header {
    display: flex;
    justify-content: center;
    margin-bottom: 10px;
    gap: 40px;
  }
  .bracket-header div {
    width: 184px;
    text-align: center;
    font-weight: 600;
    font-size: 18px;
  }
  .bracket-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    gap: 40px;
    flex-wrap: wrap;
  }
  .brackets {
    display: flex;
    gap: 40px;
  }
  .round {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
  }
  .matchup {
    margin: 20px 0;
    width: 144px;
  }
  .team-card.bracket {
    cursor: pointer;
    position: relative;
    width: 144px;
    height: 40px;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 0 6px rgba(0,0,0,0.5);
    transition: transform 0.2s, outline 0.2s;
  }
  .team-card.bracket img {
    position: absolute;
    top: 0; left: 0;
    width: 144px;
    height: 40px;
    object-fit: cover;
    z-index: 1;
  }
  .team-card.bracket span {
    position: absolute;
    width: 100%;
    height: 100%;
    font-size: 0.9rem;
    color: #fff;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    text-shadow: 0 0 4px #000;
    background: rgba(0,0,0,0.3);
    pointer-events: none;
    z-index: 2;
  }
  .team-card.bracket.selected {
    outline: 3px solid #00BFFF;
    transform: scale(1.05);
  }
  .champion-section {
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-left: 40px;
  }
  .champion-card {
    width: 144px;
    height: 40px;
    border-radius: 8px;
    overflow: hidden;
    position: relative;
    margin-bottom: 10px;
    box-shadow: 0 0 8px gold;
  }
  .champion-card img {
    position: absolute;
    width: 100%;
    height: 100%;
    object-fit: cover;
    top: 0; left: 0;
    z-index: 1;
  }
  .champion-card span {
    position: absolute;
    top: 50%;
    left: 0; right: 0;
    transform: translateY(-50%);
    font-weight: bold;
    color: black;
    background: rgba(255,215,0,0.6);
    text-shadow: 0 0 3px #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none;
  }
  .bowl-logo {
    width: 100px;
    margin-top: 10px;
  }
  @media (max-width: 800px) {
    .bracket-header {
      flex-wrap: wrap;
      gap: 20px;
    }
    .brackets {
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .champion-section {
      margin-left: 0;
      margin-top: 20px;
    }
  }
</style>
</head>
<body>

<h1>
  <img src="https://res.cloudinary.com/de4q4iitx/image/upload/v1752231585/ifl-logo_q9fmai.png" alt="IFL Logo" />
  IFL Playoff Predictor 2025/26
</h1>

<div id="stage1">
  <h2>Select Division Winners</h2>
  <div id="divisions-container"></div>
  <div class="button-row">
    <button id="toStage2" disabled>Next: Wildcard Selection</button>
  </div>
</div>

<div id="stage2">
  <h2>Select 5 Wildcard Teams</h2>
  <div id="wildcard-list" class="team-list"></div>
  <div class="button-row">
    <button id="backToStage1">Back</button>
    <button id="toStage3" disabled>Next: Playoff Bracket</button>
  </div>
</div>

<div id="stage3">
  <h2>Playoff Bracket</h2>
  <div class="bracket-header">
    <div>Divisional</div>
    <div>Conference</div>
    <div>Championship</div>
  </div>
  <div class="bracket-container">
    <div class="brackets">
      <div class="round" id="divisional"></div>
      <div class="round" id="conference"></div>
      <div class="round" id="championship"></div>
    </div>
    <div class="champion-section">
      <h3>üèÜ Champion üèÜ</h3>
      <div id="champion" class="champion-card"><span>?</span></div>
      <img src="https://res.cloudinary.com/de4q4iitx/image/upload/v1752185315/WBIII_id02n2.png" alt="World Bowl Logo" class="bowl-logo" />
    </div>
  </div>
  <div class="button-row">
    <button id="backToStage2">Back</button>
  </div>
</div>

<script>
(() => {
  // Data
  const divisions = [
    {
      name: "World East Division",
      teams: [
        { name: "Australia Whites", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182184/australia-whites_h9o2vz.png" },
        { name: "Italia Bulls", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/italia-bulls_aocvis.png" },
        { name: "Belarus Barbarians", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/belarus-barbarians_ydx3kz.png" },
        { name: "Singapore Smelters", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182186/singapore-smelters_qn3ges.png" },
        { name: "South Korea Deers", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182186/southkorea-deers_jbt02f.png" },
        { name: "Poland Panthers", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182186/poland-panthers_ppg3zr.png" },
      ]
    },
    {
      name: "World Central Division",
      teams: [
        { name: "Germany Cavaliers", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/germany-cavaliers_qrcojc.png" },
        { name: "UK 3 Lions", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182186/uk-tri-lions_kyixfr.png" },
        { name: "Finaland Frigate", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/belgium-bulldogs_hrx8td.png" },
        { name: "Belgium Bulldogs", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/belgium-bulldogs_hrx8td.png" },
        { name: "Holland Hornets", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/holland-hornets_ilzroo.png" },
        { name: "South Africa Silverbacks", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182186/southafrica-silverbaks_x6but2.png" },
      ]
    },
    {
      name: "World West Division",
      teams: [
        { name: "USA Drones", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182187/usa-drones_doeba8.png" },
        { name: "Jamaica Thunder", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/jamaica-thunder_ogo7aj.png" },
        { name: "Rwanda Raiders", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182186/rwanda-raiders_aqtgu7.png" },
        { name: "Egypt Pharaohs", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/egypt-pharaohs_ycglpl.png" },
        { name: "Peru Piranhas", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/peru-piranhas_yueas6.png" },
        { name: "Brazil Hummingbirds", logo: "https://res.cloudinary.com/de4q4iitx/image/upload/v1752182185/brazil-hummingbirds_dras9r.png" },
      ]
    }
  ];

  // State
  let selectedDivisionWinners = [null, null, null];
  let selectedWildcards = [];
  let bracket = {
    divisional: [],
    conference: [[null, null], [null, null]],
    championship: [null, null],
  };
  let champion = null;

  // Elements
  const divisionsContainer = document.getElementById('divisions-container');
  const toStage2Btn = document.getElementById('toStage2');
  const wildcardList = document.getElementById('wildcard-list');
  const toStage3Btn = document.getElementById('toStage3');
  const backToStage1Btn = document.getElementById('backToStage1');
  const backToStage2Btn = document.getElementById('backToStage2');
  const stage1 = document.getElementById('stage1');
  const stage2 = document.getElementById('stage2');
  const stage3 = document.getElementById('stage3');
  const divisionalRoundEl = document.getElementById('divisional');
  const conferenceRoundEl = document.getElementById('conference');
  const championshipRoundEl = document.getElementById('championship');
  const championEl = document.getElementById('champion');

  // Utils
  function createTeamCard(team, selected, clickHandler, disabled = false, extraClass = '') {
    const card = document.createElement('div');
    card.className = `team-card ${extraClass}` + (selected ? ' selected' : '');
    if (disabled) card.style.display = 'none';
    card.dataset.name = team.name;
    card.dataset.logo = team.logo;
    card.innerHTML = `<img src="${team.logo}" alt="${team.name} logo" /><span>${team.name}</span>`;
    if (!disabled && clickHandler) {
      card.addEventListener('click', () => clickHandler(team));
    }
    return card;
  }

  // STAGE 1 render divisions & selection
  function renderStage1() {
    divisionsContainer.innerHTML = '';
    divisions.forEach((division, divIdx) => {
      const divTitle = document.createElement('div');
      divTitle.className = 'division-title';
      divTitle.textContent = division.name;
      divisionsContainer.appendChild(divTitle);
      const teamList = document.createElement('div');
      teamList.className = 'team-list';

      division.teams.forEach(team => {
        const isSelected = selectedDivisionWinners[divIdx] && selectedDivisionWinners[divIdx].name === team.name;
        const card = createTeamCard(team, isSelected, (t) => {
          selectedDivisionWinners[divIdx] = t;
          renderStage1();
          checkStage1Complete();
        });
        teamList.appendChild(card);
      });
      divisionsContainer.appendChild(teamList);
    });
  }

  function checkStage1Complete() {
    toStage2Btn.disabled = selectedDivisionWinners.some(t => !t);
  }

  // STAGE 2 render wildcard selection excluding division winners
  function renderStage2() {
    wildcardList.innerHTML = '';
    const divisionWinnerNames = selectedDivisionWinners.map(t => t.name);
    const allTeams = divisions.flatMap(d => d.teams);
    const wildcardCandidates = allTeams.filter(t => !divisionWinnerNames.includes(t.name));
    wildcardCandidates.forEach(team => {
      const isSelected = selectedWildcards.some(t => t.name === team.name);
      const card = createTeamCard(team, isSelected, (t) => {
        if (isSelected) {
          selectedWildcards = selectedWildcards.filter(w => w.name !== t.name);
        } else if (selectedWildcards.length < 5) {
          selectedWildcards.push(t);
        }
        renderStage2();
        checkStage2Complete();
      });
      wildcardList.appendChild(card);
    });
  }

  function checkStage2Complete() {
    toStage3Btn.disabled = selectedWildcards.length !== 5;
  }

  // Stage 3 - bracket render & logic

  // Create matchup element
  function createMatchup(team1, team2, roundName, matchIdx) {
    const matchup = document.createElement('div');
    matchup.className = 'matchup';

    function createCard(team) {
      const card = document.createElement('div');
      card.className = 'team-card bracket';
      if (team) {
        card.classList.add('selected');
        card.dataset.name = team.name;
        card.dataset.logo = team.logo;
        card.innerHTML = `<img src="${team.logo}" alt="${team.name} logo" /><span>${team.name}</span>`;
      } else {
        card.innerHTML = `<span>?</span>`;
      }
      return card;
    }

    const card1 = createCard(team1);
    const card2 = createCard(team2);
    matchup.appendChild(card1);
    matchup.appendChild(card2);

    // Advance logic on team click
    [card1, card2].forEach((card, idx) => {
      card.addEventListener('click', () => {
        const clickedTeam = idx === 0 ? team1 : team2;
        if (!clickedTeam) return;
        advanceTeam(roundName, matchIdx, clickedTeam);
      });
    });

    return matchup;
  }

  // Advance winner logic
  function advanceTeam(round, matchIdx, team) {
    if (round === 'divisional') {
      const confMatch = Math.floor(matchIdx / 2);
      const slot = matchIdx % 2;
      if (!bracket.conference[confMatch]) bracket.conference[confMatch] = [null, null];
      bracket.conference[confMatch][slot] = team;
    } else if (round === 'conference') {
      bracket.championship[matchIdx] = team;
    } else if (round === 'championship') {
      champion = team;
      championEl.innerHTML = `<img src="${team.logo}" alt="${team.name} logo" /><span>${team.name}</span>`;
    }
    renderBracket();
  }

  // Render bracket rounds
  function renderBracket() {
    divisionalRoundEl.innerHTML = '';
    conferenceRoundEl.innerHTML = '';
    championshipRoundEl.innerHTML = '';

    // Setup divisional matchups: fixed pairs of division winners vs wildcards
    bracket.divisional = [
      [selectedDivisionWinners[0], selectedWildcards[0]],
      [selectedDivisionWinners[1], selectedWildcards[1]],
      [selectedDivisionWinners[2], selectedWildcards[2]],
      [selectedWildcards[3], selectedWildcards[4]],
    ];

    bracket.divisional.forEach((matchupTeams, idx) => {
      divisionalRoundEl.appendChild(createMatchup(matchupTeams[0], matchupTeams[1], 'divisional', idx));
    });

    bracket.conference.forEach((matchupTeams, idx) => {
      conferenceRoundEl.appendChild(createMatchup(matchupTeams[0], matchupTeams[1], 'conference', idx));
    });

    championshipRoundEl.appendChild(createMatchup(bracket.championship[0], bracket.championship[1], 'championship', 0));

    if (champion) {
      championEl.innerHTML = `<img src="${champion.logo}" alt="${champion.name} logo" /><span>${champion.name}</span>`;
    } else {
      championEl.innerHTML = '<span>?</span>';
    }
  }

  // Buttons and navigation handlers
  toStage2Btn.addEventListener('click', () => {
    if (selectedDivisionWinners.some(t => !t)) return;
    stage1.style.display = 'none';
    stage2.style.display = 'block';
    renderStage2();
    checkStage2Complete();
  });
  backToStage1Btn.addEventListener('click', () => {
    stage2.style.display = 'none';
    stage1.style.display = 'block';
  });
  toStage3Btn.addEventListener('click', () => {
    if (selectedWildcards.length !== 5) return;
    stage2.style.display = 'none';
    stage3.style.display = 'block';
    renderBracket();
  });
  backToStage2Btn.addEventListener('click', () => {
    stage3.style.display = 'none';
    stage2.style.display = 'block';
  });

  // Initial render
  renderStage1();
  checkStage1Complete();

  function checkStage1Complete() {
    toStage2Btn.disabled = selectedDivisionWinners.some(t => !t);
  }
  function checkStage2Complete() {
    toStage3Btn.disabled = selectedWildcards.length !== 5;
  }
})();
</script>

</body>
</html>
