<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>IFL Playoff Predictor Simple</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Rajdhani:wght@500&display=swap" rel="stylesheet" />
  <style>
    body {
      background: #111;
      color: #fff;
      font-family: 'Rajdhani', sans-serif;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h1 {
      font-family: 'Orbitron', sans-serif;
      margin-bottom: 20px;
    }
    button {
      background: #00BFFF;
      color: #fff;
      border: none;
      padding: 10px 20px;
      font-size: 1rem;
      border-radius: 6px;
      cursor: pointer;
      margin: 20px 5px;
      transition: background-color 0.2s ease;
    }
    button:hover:not(:disabled) {
      background: #0099cc;
    }
    button:disabled {
      background: #444;
      cursor: not-allowed;
    }
    .hidden {
      display: none;
    }
    .division-group {
      margin-bottom: 25px;
    }
    .division-title {
      font-weight: bold;
      font-size: 1.2rem;
      margin-bottom: 10px;
      text-decoration: underline;
    }
    .teams-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
    }
    .team-card {
      width: 144px;
      height: 40px;
      border-radius: 8px;
      line-height: 40px;
      cursor: pointer;
      font-weight: 600;
      text-shadow: 0 0 4px #000;
      color: #fff;
      user-select: none;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .team-card.selected {
      outline: 3px solid #00BFFF;
      transform: scale(1.05);
      box-shadow: 0 0 10px #00BFFF;
    }
    /* Color-coded backgrounds for each team */
    /* Use distinct background colors for each team */
    /* I‚Äôm assigning based on your divisions, you can adjust colors easily */

    /* World East */
    .team-AustraliaWhites { background: #1e90ff; }
    .team-ItaliaBulls { background: #ff4500; }
    .team-BelarusBarbarians { background: #4b0082; }
    .team-SingaporeSmelters { background: #228b22; }
    .team-SouthKoreaDeers { background: #ff6347; }
    .team-PolandPanthers { background: #ff1493; }

    /* World Central */
    .team-GermanyCavaliers { background: #ffd700; color: black; text-shadow: none; }
    .team-UK3Lions { background: #00008b; }
    .team-FinlandFrigate { background: #008080; }
    .team-BelgiumBulldogs { background: #800000; }
    .team-HollandHornets { background: #9acd32; color: black; text-shadow: none; }
    .team-SouthAfricaSilverbacks { background: #a0522d; }

    /* World West */
    .team-USADrones { background: #2f4f4f; }
    .team-JamaicaThunder { background: #556b2f; }
    .team-RwandaRaiders { background: #8b0000; }
    .team-EgyptPharaohs { background: #006400; }
    .team-PeruPiranhas { background: #ff8c00; color: black; text-shadow: none; }
    .team-BrazilHummingbirds { background: #008b8b; }

    /* Stages container */
    #stage2, #stage3 {
      margin-top: 20px;
    }

    /* Bracket styles */
    .bracket-container {
      display: flex;
      justify-content: center;
      gap: 40px;
      flex-wrap: wrap;
      margin-top: 30px;
    }
    .round {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .round-title {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.4rem;
      margin-bottom: 15px;
      text-decoration: underline;
    }
    .matchup {
      margin-bottom: 20px;
    }
    .bracket-team-card {
      width: 144px;
      height: 40px;
      border-radius: 8px;
      background-color: #222;
      line-height: 40px;
      margin: 5px 0;
      cursor: pointer;
      font-weight: 700;
      user-select: none;
      color: white;
      text-shadow: 0 0 4px #000;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }
    .bracket-team-card.selected {
      background-color: #00BFFF;
      color: black;
      transform: scale(1.05);
      box-shadow: 0 0 8px #00BFFF;
    }
    .champion-section {
      margin-top: 30px;
      font-family: 'Orbitron', sans-serif;
      font-size: 1.3rem;
      font-weight: 700;
      color: gold;
      user-select: none;
    }
  </style>
</head>
<body>
  <h1>IFL Playoff Predictor 2025/26</h1>

  <!-- Stage 1: Division Winners -->
  <div id="stage1">
    <h2>Select Division Winners</h2>

    <div class="division-group" data-division="World East">
      <div class="division-title">World East Division</div>
      <div class="teams-container" id="east-teams"></div>
    </div>

    <div class="division-group" data-division="World Central">
      <div class="division-title">World Central Division</div>
      <div class="teams-container" id="central-teams"></div>
    </div>

    <div class="division-group" data-division="World West">
      <div class="division-title">World West Division</div>
      <div class="teams-container" id="west-teams"></div>
    </div>

    <button id="toStage2" disabled>Next: Select Wildcards</button>
  </div>

  <!-- Stage 2: Wildcards -->
  <div id="stage2" class="hidden">
    <h2>Select 5 Wildcard Teams</h2>
    <div class="teams-container" id="wildcard-teams"></div>
    <button id="toStage3" disabled>Next: View Bracket</button>
    <button id="backToStage1">Back to Division Winners</button>
  </div>

  <!-- Stage 3: Bracket -->
  <div id="stage3" class="hidden">
    <h2>Playoff Bracket</h2>
    <div class="bracket-container">
      <div class="round" id="divisional-round">
        <div class="round-title">Divisional Round</div>
      </div>
      <div class="round" id="conference-round">
        <div class="round-title">Conference Round</div>
      </div>
      <div class="round" id="championship-round">
        <div class="round-title">Championship</div>
      </div>
    </div>
    <div class="champion-section" id="champion-section">
      üèÜ Champion: <span id="champion-name">?</span>
    </div>
    <button id="backToStage2">Back to Wildcards</button>
    <button id="resetAll" style="background:#ff4d4d;">Reset All</button>
  </div>

<script>
  // Teams data
  const teams = {
    "World East": [
      { id: "AustraliaWhites", name: "Australia Whites" },
      { id: "ItaliaBulls", name: "Italia Bulls" },
      { id: "BelarusBarbarians", name: "Belarus Barbarians" },
      { id: "SingaporeSmelters", name: "Singapore Smelters" },
      { id: "SouthKoreaDeers", name: "South Korea Deers" },
      { id: "PolandPanthers", name: "Poland Panthers" },
    ],
    "World Central": [
      { id: "GermanyCavaliers", name: "Germany Cavaliers" },
      { id: "UK3Lions", name: "UK 3 Lions" },
      { id: "FinlandFrigate", name: "Finland Frigate" },
      { id: "BelgiumBulldogs", name: "Belgium Bulldogs" },
      { id: "HollandHornets", name: "Holland Hornets" },
      { id: "SouthAfricaSilverbacks", name: "South Africa Silverbacks" },
    ],
    "World West": [
      { id: "USADrones", name: "USA Drones" },
      { id: "JamaicaThunder", name: "Jamaica Thunder" },
      { id: "RwandaRaiders", name: "Rwanda Raiders" },
      { id: "EgyptPharaohs", name: "Egypt Pharaohs" },
      { id: "PeruPiranhas", name: "Peru Piranhas" },
      { id: "BrazilHummingbirds", name: "Brazil Hummingbirds" },
    ],
  };

  // State
  let selectedDivisionWinners = {};
  let selectedWildcards = [];

  // Helpers
  function createTeamCard(team, selectedIds, onClick, disableIfSelected = false) {
    const card = document.createElement('div');
    card.className = `team-card team-${team.id}`;
    card.textContent = team.name;

    // If this team is selected, highlight it
    if (selectedIds.includes(team.id)) {
      card.classList.add('selected');
    }
    if (disableIfSelected && selectedIds.includes(team.id)) {
      card.classList.add('disabled');
      card.style.display = 'none';
      card.style.cursor = 'default';
    }

    card.onclick = () => {
      if (card.classList.contains('disabled')) return;
      onClick(team);
    };
    return card;
  }

  // Render Stage 1 - Division Winners selection
  function renderStage1() {
    for (const division of Object.keys(teams)) {
      const container = document.getElementById(
        division === "World East" ? "east-teams" :
        division === "World Central" ? "central-teams" :
        "west-teams"
      );
      container.innerHTML = "";
      teams[division].forEach(team => {
        const selectedIds = Object.values(selectedDivisionWinners);
        const card = createTeamCard(team, selectedIds, (team) => {
          // Only one winner per division
          selectedDivisionWinners[division] = (selectedDivisionWinners[division] === team.id) ? null : team.id;
          renderStage1();
          updateStage1NextButton();
        });
        // Highlight if selected
        if (selectedDivisionWinners[division] === team.id) {
          card.classList.add('selected');
        }
        container.appendChild(card);
      });
    }
  }

  function updateStage1NextButton() {
    const btn = document.getElementById('toStage2');
    // Enable only if all 3 divisions have a winner selected
    btn.disabled = Object.keys(selectedDivisionWinners).length !== 3 ||
      Object.values(selectedDivisionWinners).some(v => !v);
  }

  // Render Stage 2 - Wildcard selection (exclude division winners)
  function renderStage2() {
    const container = document.getElementById('wildcard-teams');
    container.innerHTML = "";
    const selectedDivisionIds = Object.values(selectedDivisionWinners).filter(Boolean);

    // Flatten all teams and exclude division winners
    const allTeams = Object.values(teams).flat();
    const wildcardCandidates = allTeams.filter(team => !selectedDivisionIds.includes(team.id));

    wildcardCandidates.forEach(team => {
      const card = createTeamCard(team, selectedWildcards, (team) => {
        if (selectedWildcards.includes(team.id)) {
          // Deselect
          selectedWildcards = selectedWildcards.filter(id => id !== team.id);
        } else {
          // Max 5 wildcards
          if (selectedWildcards.length < 5) {
            selectedWildcards.push(team.id);
          }
        }
        renderStage2();
        updateStage2NextButton();
      });
      container.appendChild(card);
    });
  }

  function updateStage2NextButton() {
    const btn = document.getElementById('toStage3');
    btn.disabled = selectedWildcards.length !== 5;
  }

  // Render Stage 3 - Bracket
  // We'll show 8 teams: 3 division winners + 5 wildcards
  // Bracket rounds: Divisional (4 matches), Conference (2 matches), Championship (1 match)
  // Match winners picked by clicking the team card in that match

  // We'll store bracket state as arrays per round:
  // divisional: array of 8 teams (objects with id and name)
  // conference: array of 4 teams or null
  // championship: array of 2 teams or null
  // champion: single team or null

  let bracket = {
    divisional: [],
    conference: [null, null, null, null],
    championship: [null, null],
    champion: null
  };

  // Utility: find team object by id
  function findTeamById(id) {
    for (const divisionTeams of Object.values(teams)) {
      for (const t of divisionTeams) {
        if (t.id === id) return t;
      }
    }
    return null;
  }

  function renderBracketRound(roundId, teams) {
    const container = document.getElementById(roundId);
    container.innerHTML = "";
    teams.forEach((team, idx) => {
      const card = document.createElement('div');
      card.className = 'bracket-team-card';
      card.textContent = team ? team.name : "TBD";
      if (team) {
        card.onclick = () => selectBracketWinner(roundId, idx);
      } else {
        card.style.opacity = 0.3;
        card.style.cursor = 'default';
      }
      if (bracket[roundId][idx] === team) card.classList.add('selected');
      container.appendChild(card);
    });
  }

  function selectBracketWinner(roundId, idx) {
    // Calculate next round and matchup index
    const roundOrder = ['divisional', 'conference', 'championship'];
    const roundIndex = roundOrder.indexOf(roundId);
    if (roundIndex === -1 || roundIndex === roundOrder.length - 1) return; // no next round

    const nextRoundId = roundOrder[roundIndex + 1];
    const nextMatchIdx = Math.floor(idx / 2);

    // Set winner in next round
    bracket[nextRoundId][nextMatchIdx] = bracket[roundId][idx];

    // Mark selected in current round
    bracket[roundId] = bracket[roundId].map((team, i) => {
      if (Math.floor(i / 2) === nextMatchIdx) {
        return team;
      }
      return team;
    });

    // Update champion if this is championship round
    if (nextRoundId === 'championship' && bracket.championship.every(t => t !== null)) {
      bracket.champion = null; // reset champion selection
      renderChampion();
    }

    // If this was championship round winner pick
    if (nextRoundId === 'championship' && bracket.championship.filter(Boolean).length === 2) {
      // Wait for next click on championship round to pick champion
    }

    // If clicked on championship round, set champion directly
    if (roundId === 'championship') {
      bracket.champion = bracket.championship[idx];
      renderChampion();
    }

    renderBracketRound(roundId, bracket[roundId]);
    renderBracketRound(nextRoundId, bracket[nextRoundId]);
  }

  function renderChampion() {
    const champName = bracket.champion ? bracket.champion.name : "?";
    document.getElementById('champion-name').textContent = champName;
  }

  // Initialize bracket divisional round with division winners + wildcards
  function initBracket() {
    bracket.divisional = [];
    for (const division of Object.keys(selectedDivisionWinners)) {
      const team = findTeamById(selectedDivisionWinners[division]);
      if (team) bracket.divisional.push(team);
    }
    for (const wcId of selectedWildcards) {
      const team = findTeamById(wcId);
      if (team) bracket.divisional.push(team);
    }
    // Defensive fallback: if less than 8, fill with nulls
    while (bracket.divisional.length < 8) bracket.divisional.push(null);

    bracket.conference = [null, null, null, null];
    bracket.championship = [null, null];
    bracket.champion = null;

    renderBracketRound('divisional-round', bracket.divisional);
    renderBracketRound('conference-round', bracket.conference);
    renderBracketRound('championship-round', bracket.championship);
    renderChampion();
  }

  // Navigation buttons handlers
  document.getElementById('toStage2').onclick = () => {
    if (Object.keys(selectedDivisionWinners).length === 3 &&
        !Object.values(selectedDivisionWinners).some(v => !v)) {
      document.getElementById('stage1').classList.add('hidden');
      document.getElementById('stage2').classList.remove('hidden');
      renderStage2();
      updateStage2NextButton();
    }
  };

  document.getElementById('backToStage1').onclick = () => {
    document.getElementById('stage2').classList.add('hidden');
    document.getElementById('stage1').classList.remove('hidden');
  };

  document.getElementById('toStage3').onclick = () => {
    if (selectedWildcards.length === 5) {
      document.getElementById('stage2').classList.add('hidden');
      document.getElementById('stage3').classList.remove('hidden');
      initBracket();
    }
  };

  document.getElementById('backToStage2').onclick = () => {
    document.getElementById('stage3').classList.add('hidden');
    document.getElementById('stage2').classList.remove('hidden');
  };

  document.getElementById('resetAll').onclick = () => {
    selectedDivisionWinners = {};
    selectedWildcards = [];
    bracket = {
      divisional: [],
      conference: [null, null, null, null],
      championship: [null, null],
      champion: null
    };
    document.getElementById('stage3').classList.add('hidden');
    document.getElementById('stage2').classList.add('hidden');
    document.getElementById('stage1').classList.remove('hidden');
    renderStage1();
    updateStage1NextButton();
  };

  // Initial render
  renderStage1();
  updateStage1NextButton();
</script>
</body>
</html>
